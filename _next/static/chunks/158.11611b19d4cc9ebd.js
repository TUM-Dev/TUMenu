(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158,511],{3511:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return MensaMap}});var jsx_runtime=__webpack_require__(5893),react=__webpack_require__(7294),useTheme=__webpack_require__(2097),useMediaQuery=__webpack_require__(1225),Dialog=__webpack_require__(2961),Box=__webpack_require__(1953),Typography=__webpack_require__(9630),CancelRounded=__webpack_require__(5813);let LeafletContext=(0,react.createContext)(null),LeafletProvider=LeafletContext.Provider;function useLeafletContext(){let context=(0,react.useContext)(LeafletContext);if(null==context)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return context}var leaflet_src=__webpack_require__(5243),leaflet_src_default=__webpack_require__.n(leaflet_src);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}let MapContainer=(0,react.forwardRef)(function({bounds,boundsOptions,center,children,className,id,placeholder,style,whenReady,zoom,...options},forwardedRef){let[props]=(0,react.useState)({className,id,style}),[context,setContext]=(0,react.useState)(null);(0,react.useImperativeHandle)(forwardedRef,()=>context?.map??null,[context]);let mapRef=(0,react.useCallback)(node=>{if(null!==node&&null===context){let map=new leaflet_src.Map(node,options);null!=center&&null!=zoom?map.setView(center,zoom):null!=bounds&&map.fitBounds(bounds,boundsOptions),null!=whenReady&&map.whenReady(whenReady),setContext(Object.freeze({__version:1,map:map}))}},[]);(0,react.useEffect)(()=>()=>{context?.map.remove()},[context]);let contents=context?react.createElement(LeafletProvider,{value:context},children):placeholder??null;return react.createElement("div",_extends({},props,{ref:mapRef}),contents)});var react_dom=__webpack_require__(3935);function element_createElementObject(instance,context,container){return Object.freeze({instance,context,container})}function element_createElementHook(createElement,updateElement){return null==updateElement?function(props,context){let elementRef=(0,react.useRef)();return elementRef.current||(elementRef.current=createElement(props,context)),elementRef}:function(props,context){let elementRef=(0,react.useRef)();elementRef.current||(elementRef.current=createElement(props,context));let propsRef=(0,react.useRef)(props),{instance}=elementRef.current;return(0,react.useEffect)(function(){propsRef.current!==props&&(updateElement(instance,props,propsRef.current),propsRef.current=props)},[instance,props,context]),elementRef}}function useAttribution(map,attribution){let attributionRef=(0,react.useRef)(attribution);(0,react.useEffect)(function(){attribution!==attributionRef.current&&null!=map.attributionControl&&(null!=attributionRef.current&&map.attributionControl.removeAttribution(attributionRef.current),null!=attribution&&map.attributionControl.addAttribution(attribution)),attributionRef.current=attribution},[map,attribution])}function useEventHandlers(element,eventHandlers){let eventHandlersRef=(0,react.useRef)();(0,react.useEffect)(function(){return null!=eventHandlers&&element.instance.on(eventHandlers),eventHandlersRef.current=eventHandlers,function(){null!=eventHandlersRef.current&&element.instance.off(eventHandlersRef.current),eventHandlersRef.current=null}},[element,eventHandlers])}function withPane(props,context){let pane=props.pane??context.pane;return pane?{...props,pane}:props}function createLayerHook(useElement){return function(props){var element;let context=useLeafletContext(),elementRef=useElement(withPane(props,context),context);return useAttribution(context.map,props.attribution),useEventHandlers(elementRef.current,props.eventHandlers),element=elementRef.current,(0,react.useEffect)(function(){let container=context.layerContainer??context.map;return container.addLayer(element.instance),function(){context.layerContainer?.removeLayer(element.instance),context.map.removeLayer(element.instance)}},[context,element]),elementRef}}let TileLayer=function(createElement,updateElement){let useElement=element_createElementHook(createElement,updateElement),useLayer=createLayerHook(useElement);return(0,react.forwardRef)(function(props,forwardedRef){let{instance}=useLayer(props).current;return(0,react.useImperativeHandle)(forwardedRef,()=>instance),null})}(function({url,...options},context){let layer=new leaflet_src.TileLayer(url,withPane(options,context));return element_createElementObject(layer,context)},function(layer,props,prevProps){!function(layer,props,prevProps){let{opacity,zIndex}=props;null!=opacity&&opacity!==prevProps.opacity&&layer.setOpacity(opacity),null!=zIndex&&zIndex!==prevProps.zIndex&&layer.setZIndex(zIndex)}(layer,props,prevProps);let{url}=props;null!=url&&url!==prevProps.url&&layer.setUrl(url)}),Marker=function(createElement,updateElement){let useElement=element_createElementHook(createElement,updateElement),useLayer=createLayerHook(useElement);return(0,react.forwardRef)(function(props,forwardedRef){let{instance,context}=useLayer(props).current;return(0,react.useImperativeHandle)(forwardedRef,()=>instance),null==props.children?null:react.createElement(LeafletProvider,{value:context},props.children)})}(function({position,...options},ctx){let marker=new leaflet_src.Marker(position,options);return element_createElementObject(marker,Object.freeze({...ctx,overlayContainer:marker}))},function(marker,props,prevProps){props.position!==prevProps.position&&marker.setLatLng(props.position),null!=props.icon&&props.icon!==prevProps.icon&&marker.setIcon(props.icon),null!=props.zIndexOffset&&props.zIndexOffset!==prevProps.zIndexOffset&&marker.setZIndexOffset(props.zIndexOffset),null!=props.opacity&&props.opacity!==prevProps.opacity&&marker.setOpacity(props.opacity),null!=marker.dragging&&props.draggable!==prevProps.draggable&&(!0===props.draggable?marker.dragging.enable():marker.dragging.disable())}),Popup=function(createElement,useLifecycle){var useElement;let useElement1=element_createElementHook(createElement);return useElement=function(props,setOpen){let context=useLeafletContext(),elementRef=useElement1(withPane(props,context),context);return useAttribution(context.map,props.attribution),useEventHandlers(elementRef.current,props.eventHandlers),useLifecycle(elementRef.current,context,props,setOpen),elementRef},(0,react.forwardRef)(function(props,forwardedRef){let[isOpen,setOpen]=(0,react.useState)(!1),{instance}=useElement(props,setOpen).current;(0,react.useImperativeHandle)(forwardedRef,()=>instance),(0,react.useEffect)(function(){isOpen&&instance.update()},[instance,isOpen,props.children]);let contentNode=instance._contentNode;return contentNode?(0,react_dom.createPortal)(props.children,contentNode):null})}(function(props,context){let popup=new leaflet_src.Popup(props,context.overlayContainer);return element_createElementObject(popup,context)},function(element,context,{position},setOpen){(0,react.useEffect)(function(){let{instance}=element;function onPopupOpen(event){event.popup===instance&&(instance.update(),setOpen(!0))}function onPopupClose(event){event.popup===instance&&setOpen(!1)}return context.map.on({popupopen:onPopupOpen,popupclose:onPopupClose}),null==context.overlayContainer?(null!=position&&instance.setLatLng(position),instance.openOn(context.map)):context.overlayContainer.bindPopup(instance),function(){context.map.off({popupopen:onPopupOpen,popupclose:onPopupClose}),context.overlayContainer?.unbindPopup(),context.map.removeLayer(instance)}},[element,context,setOpen,position])});function MensaMap(param){let{open,setOpen,foodPlaces,mapOpenCoordinates,zoom}=param,theme=(0,useTheme.Z)(),matches=(0,useMediaQuery.Z)("(min-width:37.5em)");return(0,jsx_runtime.jsxs)(Dialog.Z,{open:open,onClose:()=>setOpen(!1),disableScrollLock:!0,PaperProps:{style:{borderRadius:"12px"}},children:[(0,jsx_runtime.jsx)(Box.Z,{sx:{display:"flex",justifyContent:"flex-end",backgroundColor:theme.palette.primary.main,height:theme.spacing(3),pt:theme.spacing(.5),px:theme.spacing(.5)},children:(0,jsx_runtime.jsx)(CancelRounded.Z,{fontSize:"small",sx:{color:theme.palette.primary.dark,cursor:"pointer"},onClick:()=>setOpen(!1)})}),(0,jsx_runtime.jsxs)(MapContainer,{center:mapOpenCoordinates,zoom:zoom,style:{width:matches?550:300,height:500},children:[(0,jsx_runtime.jsx)(TileLayer,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),foodPlaces.map(foodPlace=>{let coordinates=[foodPlace.location.latitude,foodPlace.location.longitude];return(0,jsx_runtime.jsx)(Marker,{position:coordinates,children:(0,jsx_runtime.jsxs)(Popup,{children:[(0,jsx_runtime.jsx)("a",{href:"https://maps.google.com/?q=".concat(foodPlace.location.latitude,",").concat(foodPlace.location.longitude),target:"_blank",style:{fontWeight:600,color:theme.palette.primary.light},rel:"noreferrer",children:foodPlace.name}),(0,jsx_runtime.jsx)(Typography.Z,{variant:"body2",sx:{margin:"0 !important"},children:foodPlace.location.address})]})},foodPlace.canteen_id)})]})]})}__webpack_require__(5680),leaflet_src_default().Icon.Default.mergeOptions({iconUrl:"//TUMenu/_next/static/media/marker-icon.d577052a.png",iconRetinaUrl:"//TUMenu/_next/static/media/marker-icon-2x.93fdb12c.png",shadowUrl:"//TUMenu/_next/static/media/marker-shadow.612e3b52.png"})},5680:function(){}}]);